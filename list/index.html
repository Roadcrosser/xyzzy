<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/png" href="../icon_alt.png">
    <link rel="stylesheet" href="./main.css"/>
    <title>xyzzy full game list</title>
</head>
<body>
    <header>xyzzy game list</header>
    <h1>Here are all the games available on xyzzy:</h2>
    <ul id=game_list>
        <li>Fetching...</li>
        <li>(You may need to have JavaScript enabled to do this)</li>
    </ul>
</body>
<script>
  var http_req = new XMLHttpRequest();
  var url = "https://gist.githubusercontent.com/Roadcrosser/f9eab7f6473387df7235d0aa6e910748/raw/xyzzy_games.json";
  http_req.open("GET", url, false);
  http_req.send(null);

  var json_data = JSON.parse(http_req.responseText);
  
  const list=json_data.map(item=>{
    if(item[1]!==null){
      return `<li><a href="${item[1]}">${item[0]}</a></li>` 
    } else {
      return `<li>${item[0]}</li>` 
    }
  }).join("");

  var game_list = document.getElementById("game_list");
  game_list.innerHTML = list;
</script>
</html>
